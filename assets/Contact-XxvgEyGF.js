import{r as b,j as a}from"./index-CNSVEVPV.js";class g{constructor(t=0,s="Network Error"){this.status=t,this.text=s}}const S=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},i={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:S()},f=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},P=(e,t="https://api.emailjs.com")=>{if(!e)return;const s=f(e);i.publicKey=s.publicKey,i.blockHeadless=s.blockHeadless,i.storageProvider=s.storageProvider,i.blockList=s.blockList,i.limitRate=s.limitRate,i.origin=s.origin||t},p=async(e,t,s={})=>{const o=await fetch(i.origin+e,{method:"POST",headers:s,body:t}),r=await o.text(),n=new g(o.status,r);if(o.ok)return n;throw n},j=(e,t,s)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||typeof s!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},R=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},v=e=>e.webdriver||!e.languages||e.languages.length===0,y=()=>new g(451,"Unavailable For Headless Browser"),T=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},_=e=>!e.list?.length||!e.watchVariable,F=(e,t)=>e instanceof FormData?e.get(t):e[t],w=(e,t)=>{if(_(e))return!1;T(e.list,e.watchVariable);const s=F(t,e.watchVariable);return typeof s!="string"?!1:e.list.includes(s)},x=()=>new g(403,"Forbidden"),E=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},C=async(e,t,s)=>{const o=Number(await s.get(e)||0);return t-Date.now()+o},k=async(e,t,s)=>{if(!t.throttle||!s)return!1;E(t.throttle,t.id);const o=t.id||e;return await C(o,t.throttle,s)>0?!0:(await s.set(o,Date.now().toString()),!1)},L=()=>new g(429,"Too Many Requests"),H=async(e,t,s,o)=>{const r=f(o),n=r.publicKey||i.publicKey,c=r.blockHeadless||i.blockHeadless,u=r.storageProvider||i.storageProvider,d={...i.blockList,...r.blockList},l={...i.limitRate,...r.limitRate};return c&&v(navigator)?Promise.reject(y()):(j(n,e,t),R(s),s&&w(d,s)?Promise.reject(x()):await k(location.pathname,l,u)?Promise.reject(L()):p("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:n,service_id:e,template_id:t,template_params:s}),{"Content-type":"application/json"}))},N=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},V=e=>typeof e=="string"?document.querySelector(e):e,O=async(e,t,s,o)=>{const r=f(o),n=r.publicKey||i.publicKey,c=r.blockHeadless||i.blockHeadless,u=i.storageProvider||r.storageProvider,d={...i.blockList,...r.blockList},l={...i.limitRate,...r.limitRate};if(c&&v(navigator))return Promise.reject(y());const h=V(s);j(n,e,t),N(h);const m=new FormData(h);return w(d,m)?Promise.reject(x()):await k(location.pathname,l,u)?Promise.reject(L()):(m.append("lib_version","4.4.1"),m.append("service_id",e),m.append("template_id",t),m.append("user_id",n),p("/api/v1.0/email/send-form",m))},q={init:P,send:H,sendForm:O,EmailJSResponseStatus:g},D=()=>{const[e,t]=b.useState({name:"",email:"",subject:"",message:""}),[s,o]=b.useState(!1),[r,n]=b.useState(""),c=b.useCallback(d=>{const{name:l,value:h}=d.target;t(m=>({...m,[l]:h}))},[]),u=b.useCallback(async d=>{d.preventDefault(),o(!0),n("");try{const l=await q.send("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",{from_name:e.name,from_email:e.email,subject:e.subject,message:e.message,to_email:"YOUR_EMAIL"},"YOUR_PUBLIC_KEY");console.log("SUCCESS!",l.status,l.text),n("Сообщение успешно отправлено! Спасибо за обращение."),t({name:"",email:"",subject:"",message:""})}catch(l){console.error("FAILED...",l),n("Произошла ошибка при отправке сообщения. Попробуйте еще раз.")}finally{o(!1)}},[e]);return a.jsxs("form",{className:"contact-form",onSubmit:u,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"name",children:"Имя"}),a.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:c,required:!0,placeholder:"Ваше имя",disabled:s})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:c,required:!0,placeholder:"your@email.com",disabled:s})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"subject",children:"Тема"}),a.jsx("input",{type:"text",id:"subject",name:"subject",value:e.subject,onChange:c,required:!0,placeholder:"Тема сообщения",disabled:s})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"message",children:"Сообщение"}),a.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:c,required:!0,placeholder:"Ваше сообщение...",disabled:s})]}),a.jsx("button",{type:"submit",className:"form-submit",disabled:s,children:s?"Отправка...":"Отправить сообщение"}),r&&a.jsx("div",{className:`status-message ${r.includes("успешно")?"success":"error"}`,children:r})]})},I=()=>a.jsxs("section",{className:"contact",children:[a.jsx("h2",{children:"Свяжитесь со мной"}),a.jsx("a",{href:"mailto:vania2003433616@gmail.com",className:"contact-email",children:"vania2003433616@gmail.com"}),a.jsx("div",{className:"form-divider",children:a.jsx("span",{children:"или напишите через форму"})}),a.jsx(D,{})]});export{I as default};
